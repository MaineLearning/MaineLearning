function gdsrWait(a,b){jQuery("#"+a).css("display","none");jQuery("#"+b).css("display","block")}function jquery_escape_id(a){return'#'+a.replace(/:/g,"\\:").replace(/\./g,"\\.")}function gdsrEmpty(){}function multi_rating_vote(c){var d=c.split("_");var e=d[0];var f=d[1];var g=d[2];var h=d[3];var j=jQuery("#gdsr_multi_"+e+"_"+f).val();gdsrWait("gdsr_mur_text_"+e+"_"+f,"gdsr_mur_loader_"+e+"_"+f);jQuery.getJSON(gdsr_cnst_ajax,{_ajax_nonce:gdsr_cnst_nonce,vote_id:e,vote_set:f,vote_value:j,vote_tpl:g,vote_type:'m',vote_size:h},function(a){jQuery("#gdsr_mur_block_"+e+"_"+f+" .gdsr_multis_as").remove();jQuery("#gdsr_mur_block_"+e+"_"+f+" .gdcurrent").remove();jQuery("#gdsr_mur_block_"+e+"_"+f+" input").remove();jQuery("#gdsr_mur_block_"+e+"_"+f+" .ratingbutton").remove();var b=jQuery("#gdsr_mur_avgstars_"+e+"_"+f+" div").css("height");var i;if(b>0){jQuery("#gdsr_mur_avgstars_"+e+"_"+f+" div").css("width",a.average*b.substring(0,2))}for(i=0;i<a.values.length;i++){jQuery("#gdsr_mur_stars_rated_"+e+"_"+f+"_"+i).css("width",parseInt(a.values[i]))}jQuery("#gdsr_mur_text_"+e+"_"+f).html(a.rater).addClass("voted");gdsrWait("gdsr_mur_loader_"+e+"_"+f,"gdsr_mur_text_"+e+"_"+f)})}function gdsr_rating_multi_button(a){if(jQuery(a).hasClass("active")){block=jQuery(a).parent().attr("id").substring(12);multi_rating_vote(block)}}function gdsr_rating_multi_stars(a){var b=jQuery(a).attr("id").split("X");var c=b[4];var d=b[5];var e=c*d;var f='#gdsr_mur_stars_current_'+b[1]+'_'+b[2]+'_'+b[3];var g='#gdsr_multi_'+b[1]+'_'+b[2];jQuery(f).css("width",e+"px");var h=jQuery(g).val().split("X");h[b[3]]=c;var j=true;var i;for(i=0;i<h.length;i++){if(parseInt(h[i])===0){j=false;break}}jQuery(g).val(h.join("X"));var k=b[1]+'_'+b[2]+'_'+b[6]+'_'+d;if(typeof(gdsr_cnst_button)!=='undefined'&&gdsr_cnst_button==1){var l='#gdsr_button_'+k;if(j){jQuery(l).removeClass('gdinactive');jQuery(l).addClass('gdactive');jQuery(l+" a").addClass('active')}else{jQuery(l).removeClass('gdactive');jQuery(l).addClass('gdinactive');jQuery(l+" a").removeClass('active')}}else{if(j){multi_rating_vote(k)}}}function gdsr_rating_standard(b){var c=jQuery(b).attr("id").split("X");gdsrWait(c[5],c[6]);jQuery.getJSON(gdsr_cnst_ajax,{_ajax_nonce:gdsr_cnst_nonce,vote_id:c[1],vote_value:c[2],vote_type:c[4],vote_tpl:c[7],vote_size:c[8]},function(a){gdsrWait(c[6],c[5]);if(a.status=='ok'){jQuery("#gdr_stars_"+c[4]+c[1]).html("");jQuery("#gdr_vote_"+c[4]+c[1]).css("width",parseInt(a.value));jQuery("#gdr_text_"+c[4]+c[1]).addClass("voted");jQuery("#gdr_text_"+c[4]+c[1]).html(a.rater)}})}function gdsr_rating_thumb(b){var c=jQuery(b).attr('class');var d=jQuery(b).attr("id").split("X");if(d[6]=='Y'){gdsrWait("gdsr_thumb_"+d[1]+"_"+d[3]+"_"+d[2],"gdsr_thumb_"+d[1]+"_"+d[3]+"_"+"loader_"+d[2])}jQuery("#gdsr_thumb_"+d[1]+"_"+d[3]+"_"+"up a").replaceWith('<div class="'+c+'"></div>');jQuery("#gdsr_thumb_"+d[1]+"_"+d[3]+"_"+"dw a").replaceWith('<div class="'+c+'"></div>');jQuery.getJSON(gdsr_cnst_ajax,{_ajax_nonce:gdsr_cnst_nonce,vote_id:d[1],vote_value:d[2],vote_type:'r'+d[3],vote_tpl:d[4],vote_size:d[5]},function(a){if(d[6]=='Y'){gdsrWait("gdsr_thumb_"+d[1]+"_"+d[3]+"_"+"loader_"+d[2],"gdsr_thumb_"+d[1]+"_"+d[3]+"_"+d[2])}if(a.status=='ok'){jQuery("#gdsr_thumb_text_"+d[1]+"_"+d[3]).addClass("voted");jQuery("#gdsr_thumb_text_"+d[1]+"_"+d[3]).html(a.rater)}})}var gdsrCanceled=false;function hideshowCmmInt(){var a=jQuery("#comment_parent").val();if(parseInt(a)===0){jQuery("#gdsr-cmm-integration-block-review").removeClass("cmminthide");jQuery("#gdsr-cmm-integration-block-standard").removeClass("cmminthide");jQuery("#gdsr-cmm-integration-block-multis").removeClass("cmminthide")}else{jQuery("#gdsr-cmm-integration-block-review").addClass("cmminthide");jQuery("#gdsr-cmm-integration-block-standard").addClass("cmminthide");jQuery("#gdsr-cmm-integration-block-multis").addClass("cmminthide")}if(!gdsrCanceled){jQuery("#cancel-comment-reply-link").click(function(){hideshowCmmInt()});gdsrCanceled=true}else{jQuery("#cancel-comment-reply-link").unbind("click");gdsrCanceled=false}}function value_cmm_rated_multis(){var a=jQuery(".gdsr-mur-cls-rt").val();return a.split("X")}function is_cmm_rated_multis(){var a=value_cmm_rated_multis();var b=true;var i;for(i=0;i<a.length;i++){if(parseInt(a[i])===0){b=false}}return b}function value_cmm_rated_standard(){return jQuery(".gdsr-int-cls-rt").val()}function is_cmm_rated_standard(){return value_cmm_rated_standard()>0}function value_cmm_rated_review(){return jQuery(".gdsr-cmm-cls-rt").val()}function is_cmm_rated_review(){return value_cmm_rated_review()>0}function gdsr_ie(){return jQuery.browser.msie&&jQuery.browser.version<'8.0'}function gdsr_random_seed(){var a=new Date().getTime();a+=Math.floor(Math.random()*1024);return a}jQuery(document).ready(function(){if(typeof(gdsr_cnst_cache)!=='undefined'&&gdsr_cnst_cache==1){var h="";var j="";jQuery(".gdsrcacheloader").each(function(i){el=jQuery(this).attr("id").substring(6);if(el.substring(0,1)=="a"){h+=el+":"}else{j+=el+":"}});if(h.length>0){h=h.substring(0,h.length-1);jQuery.getJSON(gdsr_cnst_ajax,{_ajax_nonce:gdsr_cnst_nonce,vote_type:'cache',vote_domain:'a',votes:h},function(a){var i;for(i=0;i<a.items.length;i++){var b=a.items[i];jQuery(jquery_escape_id(b.id)).replaceWith(b.html)}if(jQuery.browser.msie){jQuery(".gdsr_rating_as > a").attr("href","javascript:gdsrEmpty()")}if(jQuery.browser.msie){jQuery(".gdthumb > a").attr("href","javascript:gdsrEmpty()")}if(jQuery.browser.msie){jQuery(".gdsr_multisbutton_as > a").attr("href","javascript:gdsrEmpty()")}if(jQuery.browser.msie){jQuery(".gdsr_multis_as > a").attr("href","javascript:gdsrEmpty()")}jQuery(".gdsr_rating_as > a").unbind("click");jQuery(".gdsr_rating_as > a").click(function(){gdsr_rating_standard(this)});jQuery(".gdthumb > a").unbind("click");jQuery(".gdthumb > a").click(function(){gdsr_rating_thumb(this)});jQuery(".gdsr_multisbutton_as > a").unbind("click");jQuery(".gdsr_multisbutton_as > a").click(function(){gdsr_rating_multi_button(this)});jQuery(".gdsr_multis_as > a").unbind("click");jQuery(".gdsr_multis_as > a").click(function(){gdsr_rating_multi_stars(this)})})}if(j.length>0){j=j.substring(0,j.length-1);jQuery.getJSON(gdsr_cnst_ajax,{_ajax_nonce:gdsr_cnst_nonce,vote_type:'cache',vote_domain:'c',votes:j},function(a){var i;for(i=0;i<a.items.length;i++){var b=a.items[i];jQuery(jquery_escape_id(b.id)).replaceWith(b.html)}if(jQuery.browser.msie){jQuery(".gdsr_rating_as > a").attr("href","javascript:gdsrEmpty()")}if(jQuery.browser.msie){jQuery(".gdthumb > a").attr("href","javascript:gdsrEmpty()")}jQuery(".gdsr_rating_as > a").unbind("click");jQuery(".gdsr_rating_as > a").click(function(){gdsr_rating_standard(this)});jQuery(".gdthumb > a").unbind("click");jQuery(".gdthumb > a").click(function(){gdsr_rating_thumb(this)})})}}if(gdsr_ie()){jQuery(".gdsr_rating_as > a").attr("href","javascript:gdsrEmpty()")}jQuery(".gdsr_rating_as > a").click(function(){gdsr_rating_standard(this)});if(gdsr_ie()){jQuery(".gdthumb > a").attr("href","javascript:gdsrEmpty()")}jQuery(".gdthumb > a").click(function(){gdsr_rating_thumb(this)});if(gdsr_ie()){jQuery(".gdsr_integration > a").attr("href","javascript:gdsrEmpty()")}jQuery(".gdsr_integration > a").click(function(){var a=jQuery(this).attr("id").split("X");var b="#"+jQuery(this).parent().attr("id");var c=a[1]*a[2];jQuery(b+"_stars_rated").css("width",c+"px");jQuery(b+"_value").val(a[1])});if(gdsr_ie()){jQuery(".gdsr_multisbutton_as > a").attr("href","javascript:gdsrEmpty()")}jQuery(".gdsr_multisbutton_as > a").click(function(){gdsr_rating_multi_button(this)});if(gdsr_ie()){jQuery(".gdsr_multis_as > a").attr("href","javascript:gdsrEmpty()")}jQuery(".gdsr_multis_as > a").click(function(){gdsr_rating_multi_stars(this)});if(gdsr_ie()){jQuery(".gdsr_mur_static > a").attr("href","javascript:gdsrEmpty()")}jQuery(".gdsr_mur_static > a").click(function(){var a=jQuery(this).attr("id").split("X");var b=a[4];var c=a[5];var d=b*c;var e='#gdsr_murvw_stars_current_'+a[1]+'_'+a[2]+'_'+a[3];var f='.gdsr_int_multi_'+a[1]+'_'+a[2];jQuery(e).css("width",d+"px");var g=jQuery(f).val().split("X");g[a[3]]=b;var i;for(i=0;i<g.length;i++){if(parseInt(g[i])===0){break}}jQuery(f).val(g.join("X"))})});
