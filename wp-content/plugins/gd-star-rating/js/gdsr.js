function gdsrWait(b,a){jQuery("#"+b).css("display","none");jQuery("#"+a).css("display","block");}function jquery_escape_id(a){return"#"+a.replace(/:/g,"\\:").replace(/\./g,"\\.");}function gdsrEmpty(){}function multi_rating_vote(g){var d=g.split("_");var b=d[0];var e=d[1];var f=d[2];var c=d[3];var a=jQuery("#gdsr_multi_"+b+"_"+e).val();gdsrWait("gdsr_mur_text_"+b+"_"+e,"gdsr_mur_loader_"+b+"_"+e);jQuery.getJSON(gdsr_cnst_ajax,{_ajax_nonce:gdsr_cnst_nonce,vote_id:b,vote_set:e,vote_value:a,vote_tpl:f,vote_type:"m",vote_size:c},function(k){jQuery("#gdsr_mur_block_"+b+"_"+e+" .gdsr_multis_as").remove();jQuery("#gdsr_mur_block_"+b+"_"+e+" .gdcurrent").remove();jQuery("#gdsr_mur_block_"+b+"_"+e+" input").remove();jQuery("#gdsr_mur_block_"+b+"_"+e+" .ratingbutton").remove();var h=jQuery("#gdsr_mur_avgstars_"+b+"_"+e+" div").css("height");if(h>0){jQuery("#gdsr_mur_avgstars_"+b+"_"+e+" div").css("width",k.average*h.substring(0,2));}for(var j=0;j<k.values.length;j++){jQuery("#gdsr_mur_stars_rated_"+b+"_"+e+"_"+j).css("width",parseInt(k.values[j]));}jQuery("#gdsr_mur_text_"+b+"_"+e).html(k.rater).addClass("voted");gdsrWait("gdsr_mur_loader_"+b+"_"+e,"gdsr_mur_text_"+b+"_"+e);});}function gdsr_rating_multi_button(a){if(jQuery(a).hasClass("active")){block=jQuery(a).parent().attr("id").substring(12);multi_rating_vote(block);}}function gdsr_rating_multi_stars(k){var b=jQuery(k).attr("id").split("X");var g=b[4];var m=b[5];var c=g*m;var j="#gdsr_mur_stars_current_"+b[1]+"_"+b[2]+"_"+b[3];var h="#gdsr_multi_"+b[1]+"_"+b[2];jQuery(j).css("width",c+"px");var l=jQuery(h).val().split("X");l[b[3]]=g;var d=true;for(var e=0;e<l.length;e++){if(parseInt(l[e])===0){d=false;break;}}jQuery(h).val(l.join("X"));var a=b[1]+"_"+b[2]+"_"+b[6]+"_"+m;if(gdsr_cnst_button==1){var f="#gdsr_button_"+a;if(d){jQuery(f).removeClass("gdinactive");jQuery(f).addClass("gdactive");jQuery(f+" a").addClass("active");}else{jQuery(f).removeClass("gdactive");jQuery(f).addClass("gdinactive");jQuery(f+" a").removeClass("active");}}else{if(d){multi_rating_vote(a);}}}function gdsr_rating_standard(b){var a=jQuery(b).attr("id").split("X");gdsrWait(a[5],a[6]);jQuery.getJSON(gdsr_cnst_ajax,{_ajax_nonce:gdsr_cnst_nonce,vote_id:a[1],vote_value:a[2],vote_type:a[4],vote_tpl:a[7],vote_size:a[8]},function(c){gdsrWait(a[6],a[5]);if(c.status=="ok"){jQuery("#gdr_stars_"+a[4]+a[1]).html("");jQuery("#gdr_vote_"+a[4]+a[1]).css("width",parseInt(c.value));jQuery("#gdr_text_"+a[4]+a[1]).addClass("voted");jQuery("#gdr_text_"+a[4]+a[1]).html(c.rater);}});}function gdsr_rating_thumb(c){var a=jQuery(c).attr("class");var b=jQuery(c).attr("id").split("X");if(b[6]=="Y"){gdsrWait("gdsr_thumb_"+b[1]+"_"+b[3]+"_"+b[2],"gdsr_thumb_"+b[1]+"_"+b[3]+"_loader_"+b[2]);}jQuery("#gdsr_thumb_"+b[1]+"_"+b[3]+"_up a").replaceWith('<div class="'+a+'"></div>');jQuery("#gdsr_thumb_"+b[1]+"_"+b[3]+"_dw a").replaceWith('<div class="'+a+'"></div>');jQuery.getJSON(gdsr_cnst_ajax,{_ajax_nonce:gdsr_cnst_nonce,vote_id:b[1],vote_value:b[2],vote_type:"r"+b[3],vote_tpl:b[4],vote_size:b[5]},function(d){if(b[6]=="Y"){gdsrWait("gdsr_thumb_"+b[1]+"_"+b[3]+"_loader_"+b[2],"gdsr_thumb_"+b[1]+"_"+b[3]+"_"+b[2]);}if(d.status=="ok"){jQuery("#gdsr_thumb_text_"+b[1]+"_"+b[3]).addClass("voted");jQuery("#gdsr_thumb_text_"+b[1]+"_"+b[3]).html(d.rater);}});}var gdsrCanceled=false;function hideshowCmmInt(){var a=jQuery("#comment_parent").val();if(parseInt(a)===0){jQuery("#gdsr-cmm-integration-block-review").removeClass("cmminthide");jQuery("#gdsr-cmm-integration-block-standard").removeClass("cmminthide");jQuery("#gdsr-cmm-integration-block-multis").removeClass("cmminthide");}else{jQuery("#gdsr-cmm-integration-block-review").addClass("cmminthide");jQuery("#gdsr-cmm-integration-block-standard").addClass("cmminthide");jQuery("#gdsr-cmm-integration-block-multis").addClass("cmminthide");}if(!gdsrCanceled){jQuery("#cancel-comment-reply-link").click(function(){hideshowCmmInt();});gdsrCanceled=true;}else{jQuery("#cancel-comment-reply-link").unbind("click");gdsrCanceled=false;}}function value_cmm_rated_multis(){var a=jQuery(".gdsr-mur-cls-rt").val();return a.split("X");}function is_cmm_rated_multis(){var b=value_cmm_rated_multis();var c=true;for(var a=0;a<b.length;a++){if(parseInt(b[a])===0){c=false;}}return c;}function value_cmm_rated_standard(){return jQuery(".gdsr-int-cls-rt").val();}function is_cmm_rated_standard(){return value_cmm_rated_standard()>0;}function value_cmm_rated_review(){return jQuery(".gdsr-cmm-cls-rt").val();}function is_cmm_rated_review(){return value_cmm_rated_review()>0;}function gdsr_ie(){return jQuery.browser.msie&&jQuery.browser.version<"8.0";}function gdsr_random_seed(){var a=new Date().getTime();a+=Math.floor(Math.random()*1024);return a;}jQuery(document).ready(function(){if(typeof(gdsr_cnst_cache)!=="undefined"&&gdsr_cnst_cache==1){var a="";var b="";jQuery(".gdsrcacheloader").each(function(c){el=jQuery(this).attr("id").substring(6);if(el.substring(0,1)=="a"){a+=el+":";}else{b+=el+":";}});if(a.length>0){a=a.substring(0,a.length-1);jQuery.getJSON(gdsr_cnst_ajax,{_ajax_nonce:gdsr_cnst_nonce,vote_type:"cache",vote_domain:"a",votes:a},function(d){for(var c=0;c<d.items.length;c++){var e=d.items[c];jQuery(jquery_escape_id(e.id)).replaceWith(e.html);}if(jQuery.browser.msie){jQuery(".gdsr_rating_as > a").attr("href","javascript:gdsrEmpty()");}if(jQuery.browser.msie){jQuery(".gdthumb > a").attr("href","javascript:gdsrEmpty()");}if(jQuery.browser.msie){jQuery(".gdsr_multisbutton_as > a").attr("href","javascript:gdsrEmpty()");}if(jQuery.browser.msie){jQuery(".gdsr_multis_as > a").attr("href","javascript:gdsrEmpty()");}jQuery(".gdsr_rating_as > a").unbind("click");jQuery(".gdsr_rating_as > a").click(function(){gdsr_rating_standard(this);});jQuery(".gdthumb > a").unbind("click");jQuery(".gdthumb > a").click(function(){gdsr_rating_thumb(this);});jQuery(".gdsr_multisbutton_as > a").unbind("click");jQuery(".gdsr_multisbutton_as > a").click(function(){gdsr_rating_multi_button(this);});jQuery(".gdsr_multis_as > a").unbind("click");jQuery(".gdsr_multis_as > a").click(function(){gdsr_rating_multi_stars(this);});});}if(b.length>0){b=b.substring(0,b.length-1);jQuery.getJSON(gdsr_cnst_ajax,{_ajax_nonce:gdsr_cnst_nonce,vote_type:"cache",vote_domain:"c",votes:b},function(d){for(var c=0;c<d.items.length;c++){var e=d.items[c];jQuery(jquery_escape_id(e.id)).replaceWith(e.html);}if(jQuery.browser.msie){jQuery(".gdsr_rating_as > a").attr("href","javascript:gdsrEmpty()");}if(jQuery.browser.msie){jQuery(".gdthumb > a").attr("href","javascript:gdsrEmpty()");}jQuery(".gdsr_rating_as > a").unbind("click");jQuery(".gdsr_rating_as > a").click(function(){gdsr_rating_standard(this);});jQuery(".gdthumb > a").unbind("click");jQuery(".gdthumb > a").click(function(){gdsr_rating_thumb(this);});});}}if(gdsr_ie()){jQuery(".gdsr_rating_as > a").attr("href","javascript:gdsrEmpty()");}jQuery(".gdsr_rating_as > a").click(function(){gdsr_rating_standard(this);});if(gdsr_ie()){jQuery(".gdthumb > a").attr("href","javascript:gdsrEmpty()");}jQuery(".gdthumb > a").click(function(){gdsr_rating_thumb(this);});if(gdsr_ie()){jQuery(".gdsr_integration > a").attr("href","javascript:gdsrEmpty()");}jQuery(".gdsr_integration > a").click(function(){var e=jQuery(this).attr("id").split("X");var d="#"+jQuery(this).parent().attr("id");var c=e[1]*e[2];jQuery(d+"_stars_rated").css("width",c+"px");jQuery(d+"_value").val(e[1]);});if(gdsr_ie()){jQuery(".gdsr_multisbutton_as > a").attr("href","javascript:gdsrEmpty()");}jQuery(".gdsr_multisbutton_as > a").click(function(){gdsr_rating_multi_button(this);});if(gdsr_ie()){jQuery(".gdsr_multis_as > a").attr("href","javascript:gdsrEmpty()");}jQuery(".gdsr_multis_as > a").click(function(){gdsr_rating_multi_stars(this);});if(gdsr_ie()){jQuery(".gdsr_mur_static > a").attr("href","javascript:gdsrEmpty()");}jQuery(".gdsr_mur_static > a").click(function(){var k=jQuery(this).attr("id").split("X");var g=k[4];var j=k[5];var e=g*j;var d="#gdsr_murvw_stars_current_"+k[1]+"_"+k[2]+"_"+k[3];var f=".gdsr_int_multi_"+k[1]+"_"+k[2];jQuery(d).css("width",e+"px");var c=jQuery(f).val().split("X");c[k[3]]=g;for(var h=0;h<c.length;h++){if(parseInt(c[h])===0){break;}}jQuery(f).val(c.join("X"));});});